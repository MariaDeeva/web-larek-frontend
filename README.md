# Проектная работа "Веб-ларек"
## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Бизнес логика проекта:

### 1. Базовый Класс `Component<T>`
Данный класс является абстрактным и представляет базовый класс компонента. 
Он содержит ряд методов:
1. Конструктор: Принимает контейнерный элемент (HTMLElement), в котором будет размещаться компонент.
2. Метод toggleClass: Позволяет переключать класс у элемента. 
3. Метод setText: Устанавливает текстовое содержимое элемента.
4. Метод setDisabled: Изменяет состояние блокировки элемента.
5. Метод setHidden: Скрывает элемент.
6. Метод setVisible: Показывает скрытый ранее элемент.
7. Метод setImage: Устанавливает изображение элементу типа HTMLImageElement.
8. Метод render: Возвращает корневой DOM-элемент компонента, который был передан в конструкторе. 

### 1.1. Класс `Modal<T>`
Данный класс является представлением модального окно веб-интерфейса. Он наследуется от базового класса Component, которому передается интерфейс IModalData в качестве типа данных для его обобщенного параметра T.
Он содержит ряд методов:
1. Конструктор класса инициализирует свойства и привязывает обработчики событий к элементам модального окна.
2. Метод content является сеттером и позволяет устанавливать содержимое модального окна.
3. Метод open отвечает за открытие модального окна.
4. Метод close отвечают за закрытие модального окна.
5. Метод render вызывает родительский метод render для отрисовки компонента на странице и затем открывает модальное окно.

### 1.2. Класс `Form<T>`
Данный класс является представлением компонента формы веб-интерфейса. Он наследуется от базового класса Component, который использует интерфейс IFormState в качестве типа данных для его обобщенного параметра T.
Он содержит ряд методов, обработчиков и свойст:
1. Конструктор класса инициализирует свойства _submit и _errors, которые представляют соответственно кнопку отправки формы и элемент для вывода ошибок.
2. Обработчик input следит за изменениями в полях ввода формы.
3. Обработчик submit предотвращает отправку формы по умолчанию.
4. Свойство valid устанавливает disabled для кнопки отправки формы.
5. Свойство errors устанавливает текст ошибки.
6. Метод render принимает объект состояния формы и отрисовывает его. 
  
### 1.2.1. Класс `ContactForm`
Данный класс является предоставлением функциональности для работы с формой контактов. Он наследуется от базового класса Form и принимает обобщенный параметр IContactForm, который представляет тип данных для его состояния.
Он имеет следующие свойства и методы:
1. Конструктор класса принимает элемент, содержащий форму.
2. Методы для получения и установки значений полей формы контактных данных.

### 1.2.2. Класс `OrderForm` 
Данный класс является предоставлением функциональности для работы с формой заказа. Он наследуется от базового класса Form и принимает обобщенный параметр IContactForm, который представляет тип данных для его состояния.
Он имеет следующие свойства и методы:
1. Конструктор класса принимает элемент, содержащий форму.
2. Метод addButtonClickHandler добавляет обработчик события клика на кнопки оплаты.
3. Метод toggleButtons используется для изменения визуального состояния кнопок оплаты.
4. Метод address устанавливает значение адреса в форме заказа.

### 1.3. Класс `Success`
Данный класс является представлением компонента успешного завершения заказа. Он наследуется от базового класса Component и принимает обобщенный параметр ISuccess, который представляет тип данных для его состояния.
Он содержит ряд инфтерфейсов, обработчиков и свойств:
1. Интерфейс ISuccess определяет тип данных для общей суммы.
2. Интерфейс ISuccessActions определяет действия на компоненте, которая будет вызываться при клике на элемент. 
3. Конструктор класса инициализирует свойства _close и __description, которые соответствуют элементам веб-интерфейса.
4. Свойство description предоставляет доступ к содержимому элемента.

### 1.4. Класс `BasketForm`
Данный класс является представлением компонента формы корзины. Он наследуется от базового класса Component и принимает обобщенный параметр IBasketView, который представляет тип данных для его состояния.
Он содержит ряд методов, обработчиков и свойст:
1. Конструктор класса инициализация свойства, которые соответствуют элементам веб-интерфейса.
2. Метод toggleButton позволяет включать и отключать кнопку.
3. Свойство items позволяет задавать список элементов корзины.
4. Свойство total позволяет задавать общую сумму заказа

### 1.5. Класс `Cards`
Данный класс является наследником класса Component и предназначен для управления отдельными карточками. 
Он имеет следующие свойства и методы:
1. Конструктор класса принимает контейнер, в котором будет размещена карточка.
2. Метод disableButton блокирует кнопку, если цена = null.
3. Методы для управления содержимым соответствующих элементов карточки внутри класса.

### 1.6 Класс `Page`
Данный класс является предоставлением компонентов страницы, который отвечает за отображение и управление различными элементами страницы. Он наследуется от базового класса Component и принимает обобщенный параметр IPage, который представляет тип данных для его состояния. 
Он имеет следующие свойства и методы:
1. Конструктор класса инициализирует свойства, а также устанавливает обработчик клика на элемент.
2. Метод ensureElement инициализирует свойства с соответствующими HTML-элементами, полученными по классам.
3. Метод handleBasketClick предназначен для обработки события клика на элемент корзины.
4. Методы предназначены для установки значений счетчика, элементов галереи и состояния блокировки.


### 2.Базовый Класс `Model<T>`
Данный класс является абстрактным и представляет базовый класс компонента.
Он содержит ряд методов:
1. Конструктор: Принимает частичные данные (data: Partial<t>) и события (events: IEvents) в качестве аргументов.
2. Метод emitChanges: Отправляет событие об изменении модели.

### 2.1. Класс `Product`
Данный класс является обобщенным и использует интерфейс IProduct для указания типа данных, которые должны соответствовать модели товара, наследует функциональность от абстрактного класса Model

### 2.2. Класс `IAppState`
Данный класс является моделью приложения: хранит состояние приложения, включая каталог продуктов, корзину, заказ, данные для предварительного просмотра, ошибки формы. Наследуются от Model<IAppState>.
Он содержит ряд методов:
1. Конструктор принимает начальное состояние IAppState и инициализирует свойства класса catalog, basket, order, preview и formErrors соответствующими значениями.
2. Метод clearOrder используется для очистки данных о заказе.
3. Метод setCatalog используется для установки каталога продуктов.
4. Метод setPreview используется для установки предварительного просмотра продукта.
5. Метод handleBasketAction используется для обработки добавления и удаления товара в корзине.
6. Метод removeBasket используется для удаления всех товаров из корзины.
7. Метод refreshBasket используется для обновления данных о корзине.
8. Метод setOrderField используется для установки значений полей заказа.
9. Метод setContactField используется для установки значений полей контактных данных.
10. Метод validateOrder используется для валидации данных заказа.
11. Метод validateContact используется для валидации данных контактных данных.


### 3. Базовый Класс `Api`
Данный класс является оберткой над API запросами. 
В классе определены следующие методы и типы:
1. Тип ApiPostMethods: Это тип, который ограничивает возможные значения для методов запроса.
2. Тип ApiListResponse<Type>: Это тип, который представляет ответ от API.
3. Метод handleResponse: Это метод, который обрабатывает ответы от сервера.
4. Метод get: Это метод для выполнения GET-запросов. 
5. Метод post: Это метод для выполнения POST-запросов.

### 3.1. Класс `LarekApi`
Данный класс является реализацией интерфейса ILarekApi и предоставляет методы для работы с API Larek.
Он имеет следующие методы:
1. Метод getProductList отправляет GET-запрос на /product и возвращает массив объектов IProduct. 
2. Метод getProductItem отправляет GET-запрос на /product/${id} и возвращает объект IProduct.
3. Метод orderProducts отправляет POST-запрос на /order с объектом заказа и возвращает объект IOrderResult - результат заказа.